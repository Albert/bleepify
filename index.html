<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Bleepify It!</title>
<body>

<div>
  <h1>Bleepify it!</h1>
  <p><strong>Note!</strong> currently only works for Google Chrome. (chrome logo?)</p>
  <p><strong>Please don't share this project until it gets a <em>much needed</em> design pass</strong>.</p>
  <p>To bleepify this site, click this link: <a href="javascript:(function(){rnd=Math.floor(Math.random()*80000);document.body.appendChild(document.createElement('script')).src='http://bleepify.albert-hwang.com/script.js?r='+rnd;})();">Bleepify it!</a></p>
  <p>To bleepify any website in existence, drag "<a href="javascript:(function(){rnd=Math.floor(Math.random()*80000);document.body.appendChild(document.createElement('script')).src='http://bleepify.albert-hwang.com/script.js?r='+rnd;})();">Bleepify it!</a>" to your bookmarks bar, visit a different website, and click on the bookmarklet.</p>
  <p>This project was built by <a href="http://albert-hwang.com">Albert Hwang</a>.  Original idea came from my good friend Andrew Carr.</p>
  <p>Wanna play with the source?  Here's the <a href="https://github.com/Albert/bleepify-it">github repo</a>.</p>
  <ul>
    <li><a href="javascript:(function(){rnd=Math.floor(Math.random()*80000);document.body.appendChild(document.createElement('script')).src='script.js?r='+rnd;})();">Albert's Local Testing</a> (This is only here for my development of bleepify... this will work on this site, but won't work if used on another page through the bookmarklet)</li>
    <li>
      <div>
        Now here's some random markup to make your Bleepify experience more enjoyable:
        <div>
          This
          <div>
            Is
            <div>
              Just
              <div>
                Filler.
                <div>
                  This
                  <div>
                    Is
                    <div>
                      Just
                      <div>
                        Filler.
                        <div>
                          This
                          <div>
                            Is
                            <div>
                              Just
                              <div>
                                Filler.
                                <div>
                                  This
                                  <div>
                                    Is
                                    <div>
                                      Just
                                      <div>
                                        Filler.
                                        <div>
                                          This
                                          <div>
                                            Is
                                            <div>
                                              Just
                                              <div>
                                                Filler.
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
    </li>
    <li>This is an example blah 1</li>
    <li>This is an example blah 2</li>
    <li>This is an example blah 3</li>
    <li>This is an example blah 4</li>
    <li>This is an example blah 5</li>
    <li>This is an example blah 6</li>
    <li>This is an example blah 7</li>
    <li>
      <ol>
        <li>Word</li>
        <li>Blah</li>
        <li>O yeah</li>
        <li>
          <div>
            <table>
              <tr>
                <td><span>This is a test</span></td>
                <td><span>This is a test</span></td>
                <td><span>This is a test</span></td>
              </tr>
              <tr>
                <td><span>This is a test</span></td>
                <td><span>This is a test</span></td>
                <td><span>This is a test</span></td>
              </tr>
              <tr>
                <td><span>This is a test</span></td>
                <td>
                  <div>
                    yeop
                    <div>
                      Horay!
                    </div>
                    <div>
                      Why not?
                    </div>
                    <div>
                      Why <span>not</span><span><span><span>?</span></span></span>
                    </div>
                  </div>
                </td>
                <td><span>This is a test</span></td>
              </tr>
              <tr>
                <td><span>This is a test</span></td>
                <td><span>This is a test</span></td>
                <td><span>This is a test</span></td>
              </tr>
            </table>
          </div>
        </li>
        <li>: )</li>
        <li>: D</li>
        <li>D :</li>
      </ol>
    </li>
    <li>Thank you for listening</li>
  </ul>
  <!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" charset="utf-8">
      var context = new webkitAudioContext()
        , source  = context.createBufferSource()
        , request = new XMLHttpRequest()
        ;

      request.addEventListener( 'load', function( e ){
        context.decodeAudioData( request.response, function( decoded_data ){
          source.buffer = decoded_data;
          source.connect( context.destination );
        }, function( e ){
        });
      }, false );


      // request.open( 'GET', '26777__junggle__btn402.mp3', true );
      request.open( 'GET', 'http://bleepify.albert-hwang.com/26777__junggle__btn402.mp3', true );
      request.responseType = "arraybuffer";
      request.send();

      var intervalsInFractions = [1, 9/8, 5/4, 4/3, 3/2, 5/3, 15/8];

      var chromaticInFractions = [1, 16/15, 9/8, 6/5, 5/4, 4/3, 45/32, 3/2, 8/5, 5/3, 9/5, 15/8];

      function playSound(depth){
        var newSource = context.createBufferSource();
        newSource.buffer = source.buffer;
        newSource.connect( context.destination );
        baseNote = .2;
        octave = Math.floor(depth / 12);
        octaveFactor = Math.pow(2, octave);
        note = (depth) % 12;
        tone = baseNote * octaveFactor * chromaticInFractions[note];
        newSource.playbackRate.value = tone;
        newSource.noteOn( 0 );
        console.log(depth + " -- " + tone);
      };

    jQuery(':visible').each(function(index){
      var $this = jQuery(this);
      var oldBorder = $this.css("border");
      setTimeout(function () {
        $this.css("border", "1px solid red");
        playSound($this.parents().length);
      }, (index + 3) * 200);
      setTimeout(function() {
        $this.css("border", oldBorder);
      }, (index + 4) * 200);
    });
    
  </script> -->
</body>
</html>